<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Valentine</title>

<style>
:root{
  --bg1:#b3001b;
  --bg2:#ff0a54;
  --yes:#ff0000;
}

body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  min-height:100vh;
  display:grid;
  place-items:center;
  overflow:hidden;
  background:
    radial-gradient(900px 520px at 20% 15%, rgba(255,255,255,.20), transparent 55%),
    radial-gradient(900px 520px at 80% 0%, rgba(0,0,0,.20), transparent 55%),
    linear-gradient(135deg,var(--bg1),var(--bg2));
}

/* ---------- SFONDI ---------- */
.layer{
  position:fixed;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}
.item{
  position:absolute;
  bottom:-60px;
  animation: floatUp linear infinite;
}
@keyframes floatUp{
  from{ transform:translateY(0) translateX(0); opacity:0;}
  10%{opacity:1;}
  to{ transform:translateY(-115vh) translateX(50px); opacity:0;}
}

/* ---- CARD ---- */
.card{
  width:520px;
  max-width:92vw;
  background: rgba(255,255,255,.92);
  border-radius:18px;
  padding:24px;
  text-align:center;
  box-shadow: 0 18px 45px rgba(0,0,0,.22);
}
.card.hide{
  opacity:0;
  transform: scale(.98);
  transition: opacity .35s ease, transform .35s ease;
  pointer-events:none;
}

h1{
  margin:0 0 14px;
  font-size:26px;
  color:#ff0000;
}

.buttons{
  position:relative;
  height:160px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.row{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:14px;
}

button{
  padding:12px 18px;
  border-radius:16px;
  border:1px solid rgba(0,0,0,.12);
  font-weight:900;
  cursor:pointer;
}

#yes{
  background:var(--yes);
  color:#fff;
  border:none;
}

#no{
  background:#eee;
  font-size:22px;
  padding:18px 34px;
}

/* overlay */
#imgOverlay{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  gap:14px;
  pointer-events:none;
}

#gifImg{
  display:none;
  max-width:55%;
}

#errorImg{
  display:none;
  width:110px;
}

#errorText{
  display:none;
  font-size:22px;
  font-weight:900;
  color:white;
  background:black;
  padding:10px 16px;
  border-radius:10px;
}

#errorEmojis{
  display:none;
  font-size:34px;
}

#sorryBtn,
#errorYesBtn{
  display:none;
  pointer-events:auto;
}

#sorryBtn{
  background:white;
  font-size:18px;
}

#errorYesBtn{
  background:red;
  color:white;
  border:none;
}

#heartWrap{
  display:none;
  width:min(420px,70vw);
}

#heartSvg{
  width:100%;
}

#winText{
  display:none;
  font-size:28px;
  font-weight:900;
  color:white;
}
</style>
</head>

<body>

<div class="layer" id="party"></div>

<div class="card" id="card">
  <h1>Matteo will you be my Valentine?</h1>

  <div class="buttons">
    <div class="row">
      <button id="no">No</button>
      <button id="yes">Yes</button>
    </div>
  </div>

  <div id="deadLucy" style="display:none;font-weight:900;margin-top:10px;">
    Matteo MORTE
  </div>
</div>

<div id="imgOverlay">
  <img id="gifImg" src="funny-celebrate-56.gif">

  <img id="errorImg" src="error.png">
  <div id="errorText">An error occurred â€” Proposta ritirata</div>
  <div id="errorEmojis">ðŸ˜ˆðŸ˜¡ðŸ’€ðŸ‘¹</div>

  <button id="sorryBtn">Sono molto dispiaciuto ðŸ˜­</button>
  <button id="errorYesBtn">Yes</button>

  <div id="heartWrap">
    <svg id="heartSvg" viewBox="0 0 100 100">
      <defs>
        <clipPath id="heartClip" clipPathUnits="objectBoundingBox">
          <path d="
            M 0.50 0.92
            C 0.20 0.72, 0.02 0.50, 0.18 0.30
            C 0.30 0.14, 0.46 0.18, 0.50 0.30
            C 0.54 0.18, 0.70 0.14, 0.82 0.30
            C 0.98 0.50, 0.80 0.72, 0.50 0.92
            Z" />
        </clipPath>
      </defs>

      <image
        href="foto_new.png"
        x="0" y="0" width="100" height="100"
        preserveAspectRatio="xMidYMid meet"
        clip-path="url(#heartClip)"
        transform="translate(18 18) scale(0.64)"
      />
    </svg>
  </div>

  <div id="winText">Hai vinto un regalo!</div>
</div>

<script>
const yesBtn = document.getElementById("yes");
const noBtn = document.getElementById("no");
const card = document.getElementById("card");
const deadLucy = document.getElementById("deadLucy");

const overlay = document.getElementById("imgOverlay");
const gif = document.getElementById("gifImg");

const errorImg = document.getElementById("errorImg");
const errorText = document.getElementById("errorText");
const errorEmojis = document.getElementById("errorEmojis");

const sorryBtn = document.getElementById("sorryBtn");
const errorYesBtn = document.getElementById("errorYesBtn");

const heartWrap = document.getElementById("heartWrap");
const winText = document.getElementById("winText");

let firstYesClick = true;

/* YES */
yesBtn.onclick = () => {

  if(firstYesClick){
    firstYesClick = false;

    overlay.style.display = "flex";
    overlay.style.pointerEvents = "auto";

    errorImg.style.display = "block";
    errorText.style.display = "block";
    errorEmojis.style.display = "block";

    setTimeout(()=>{
      sorryBtn.style.display = "inline-flex";
    },1000);

    return;
  }

  runSuccess();
};

/* click sorry */
sorryBtn.onclick = () => {

  errorImg.style.display = "none";
  errorText.style.display = "none";
  errorEmojis.style.display = "none";
  sorryBtn.style.display = "none";

  errorYesBtn.style.display = "inline-flex";
};

/* YES dopo scuse */
errorYesBtn.onclick = () => {
  runSuccess();
};

function runSuccess(){
  overlay.style.display = "flex";

  errorYesBtn.style.display="none";
  gif.style.display="block";
  winText.style.display="block";

  setTimeout(()=>{
    gif.style.display="none";
    heartWrap.style.display="block";
    winText.innerText="(Oltre a me?ðŸ˜›)";
  },4000);

  card.classList.add("hide");
}

/* NO */
noBtn.onclick = ()=>{
  deadLucy.style.display="block";
};
</script>

</body>
</html>
